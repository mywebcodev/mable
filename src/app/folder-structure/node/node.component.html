<ul>
  <li [class.root]="node.children?.length">
    <ng-container *ngTemplateOutlet="nodeTemplate;context:{nodeValue: node}"></ng-container>
  </li>
  <li *ngFor="let child of node.children">
    <ng-container [ngSwitch]="child.type">
      <ng-container *ngSwitchCase="'folder'"><app-node [node]="child"></app-node></ng-container>
      <ng-container *ngSwitchDefault>
        <ng-container *ngTemplateOutlet="nodeTemplate;context:{nodeValue: child}"></ng-container>
      </ng-container>
    </ng-container>
  </li>
  <li *ngIf="canShowControls(node)">
    <div class="btn-group">
      <button type="button" class="add-node-btn" (click)="onCreate('folder', node)">Folder</button>
      <button type="button" class="add-node-btn" (click)="onCreate('file', node)">File</button>
    </div>
  </li>
</ul>

<ng-template #nodeTemplate let-nodeValue="nodeValue">
  <div ngClass="{{nodeValue.type}}">
    <div class="node-flex-container">
      <span class="node-name">{{nodeValue.name}}</span>
      <div class="node-btn-group">
        <img class="add-node-btn" src="../../../assets/images/folder-structure/add-circle.svg" alt="">
        <img class="add-node-btn" src="../../../assets/images/folder-structure/delete.svg" alt="" (click)="onDelete(nodeValue)">
      </div>
    </div>
  </div>
</ng-template>

<ng-template></ng-template>
